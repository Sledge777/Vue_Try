{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nexport const ListModule = {\n  state: () => ({\n    lists: [],\n    selectedSort: '',\n    search: '',\n    page: 0,\n    limit: 10,\n    maxLists: 0,\n    sortOptions: [{\n      value: 'title',\n      name: 'По названию'\n    }, {\n      value: 'body',\n      name: 'По содержимому'\n    }]\n    // или так state: () => ({}) Без return\n  }),\n\n  getters: {\n    sortedLists(state) {\n      return [...state.lists].sort((list1, list2) => list1[state.selectedSort]?.localeCompare(list2[state.selectedSort]));\n    },\n    searchedAndSortLists(state, getters) {\n      return getters.sortedLists.filter(list => list.title.toLowerCase().includes(state.search.toLowerCase()));\n    }\n  },\n  mutations: {\n    setLists(state, el) {\n      state.lists = el;\n    },\n    setSort(state, el) {\n      state.selectedSort = el;\n    },\n    setPage(state, el) {\n      state.page = el;\n    },\n    setMaxLists(state, el) {\n      state.maxLists = el;\n    },\n    setSearch(state, el) {\n      state.search = el;\n    }\n  },\n  actions: {\n    add(newList) {\n      state.lists.push(newList);\n    },\n    remove(list) {\n      commit('lists', state.lists.filter(l => l.id !== list.id));\n    },\n    showDialog() {\n      commit('dialogVisible', true);\n    },\n    async fetchLists({\n      state,\n      commit\n    }) {\n      try {\n        commit('setPage', state.page + 1);\n        const response = await axios.get('https://jsonplaceholder.typicode.com/posts', {\n          params: {\n            _page: state.page,\n            _limit: state.limit\n          }\n        });\n        commit('setMaxLists', Math.ceil(response.headers['x-total-count'] / state.limit));\n        commit('setLists', [...state.lists, ...response.data]); // удалить state.lists\n      } catch {\n        alert('пизда');\n      }\n    },\n    changePage(pageNum, dispatch, commit) {\n      commit('page', pageNum);\n      dispatch.fetchLists();\n    }\n  },\n  namespaced: true\n};","map":{"version":3,"names":["axios","ListModule","state","lists","selectedSort","search","page","limit","maxLists","sortOptions","value","name","getters","sortedLists","sort","list1","list2","localeCompare","searchedAndSortLists","filter","list","title","toLowerCase","includes","mutations","setLists","el","setSort","setPage","setMaxLists","setSearch","actions","add","newList","push","remove","commit","l","id","showDialog","fetchLists","response","get","params","_page","_limit","Math","ceil","headers","data","alert","changePage","pageNum","dispatch","namespaced"],"sources":["C:/Users/bogda/Downloads/Vue_Try/src/store/ListModule.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nexport const ListModule = {\r\n    state: () => ({\r\n        lists: [],\r\n        selectedSort: '',\r\n        search: '',\r\n        page:0,    \r\n        limit:10,\r\n        maxLists:0,\r\n        sortOptions: [\r\n            {value: 'title', name: 'По названию'},\r\n            {value: 'body', name: 'По содержимому'}\r\n        ],                                 \r\n    // или так state: () => ({}) Без return\r\n    }),\r\n    getters: {\r\n        sortedLists(state) {\r\n            return [...state.lists].sort((list1,list2) =>  list1[state.selectedSort]?.localeCompare(list2[state.selectedSort]))\r\n        },\r\n        searchedAndSortLists(state,getters) {\r\n            return getters.sortedLists.filter(list => list.title.toLowerCase().includes(state.search.toLowerCase()))\r\n        },\r\n    },\r\n    mutations: {\r\n        setLists(state,el) {\r\n            state.lists = el\r\n        },\r\n        setSort(state,el) {\r\n            state.selectedSort = el\r\n        },\r\n        setPage(state,el) {\r\n            state.page = el\r\n        },\r\n        setMaxLists(state,el) {\r\n            state.maxLists = el\r\n        },\r\n        setSearch(state,el) {\r\n            state.search = el\r\n        },\r\n\r\n    },\r\n    actions: {\r\n        add(newList) {\r\n            state.lists.push(newList);\r\n        },\r\n        remove(list) {\r\n            commit('lists',state.lists.filter(l => l.id !== list.id))\r\n        },\r\n        showDialog() {\r\n            commit('dialogVisible',true)\r\n        },\r\n        async fetchLists({state,commit}) {\r\n\r\n            try {\r\n                commit('setPage', state.page +1)\r\n                const response = await axios.get('https://jsonplaceholder.typicode.com/posts', {\r\n                    params: {\r\n                        _page: state.page,\r\n                        _limit: state.limit,\r\n                    }\r\n                });\r\n                commit('setMaxLists',Math.ceil(response.headers['x-total-count'] / state.limit))\r\n                commit('setLists',[...state.lists, ...response.data]) // удалить state.lists\r\n\r\n            }catch {\r\n                alert('пизда')\r\n            }\r\n            \r\n        },\r\n        changePage(pageNum,dispatch,commit) {\r\n            commit('page',pageNum)\r\n            dispatch.fetchLists()\r\n        }\r\n    },\r\n    namespaced: true,\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}